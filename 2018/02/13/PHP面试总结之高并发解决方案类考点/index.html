<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="PHP,知识总结,网站优化,负载均衡," />










<meta name="description" content="1.高并发和大流量解决方案考点1.回顾真题:PHP如何解决网站大流量与高并发的问题？考官考点:高并发架构相关概念，高并发解决方案案例 2.高并发架构相关概念并发:在操作系统中，是指一个时间段中有几个程序都处于已启动运行到运行完毕之间，且这几个程序都是在同一个处理机上运行，但任一个时刻点上只有一个程序在处理机上运行。我们所说的高并发：在互联网领域，并发、高并发通常是指并发访问；即在某个时间点，有多少">
<meta name="keywords" content="PHP,知识总结,网站优化,负载均衡">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP面试总结之高并发解决方案类考点">
<meta property="og:url" content="http://yoursite.com/2018/02/13/PHP面试总结之高并发解决方案类考点/index.html">
<meta property="og:site_name" content="全蛋的博客">
<meta property="og:description" content="1.高并发和大流量解决方案考点1.回顾真题:PHP如何解决网站大流量与高并发的问题？考官考点:高并发架构相关概念，高并发解决方案案例 2.高并发架构相关概念并发:在操作系统中，是指一个时间段中有几个程序都处于已启动运行到运行完毕之间，且这几个程序都是在同一个处理机上运行，但任一个时刻点上只有一个程序在处理机上运行。我们所说的高并发：在互联网领域，并发、高并发通常是指并发访问；即在某个时间点，有多少">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-03-04T03:18:52.972Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP面试总结之高并发解决方案类考点">
<meta name="twitter:description" content="1.高并发和大流量解决方案考点1.回顾真题:PHP如何解决网站大流量与高并发的问题？考官考点:高并发架构相关概念，高并发解决方案案例 2.高并发架构相关概念并发:在操作系统中，是指一个时间段中有几个程序都处于已启动运行到运行完毕之间，且这几个程序都是在同一个处理机上运行，但任一个时刻点上只有一个程序在处理机上运行。我们所说的高并发：在互联网领域，并发、高并发通常是指并发访问；即在某个时间点，有多少">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/02/13/PHP面试总结之高并发解决方案类考点/"/>





  <title>PHP面试总结之高并发解决方案类考点 | 全蛋的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">全蛋的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">评论就不开了</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/13/PHP面试总结之高并发解决方案类考点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fullegg">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.JPG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全蛋的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">PHP面试总结之高并发解决方案类考点</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-13T18:11:25+08:00">
                2018-02-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面试/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="1-高并发和大流量解决方案考点"><a href="#1-高并发和大流量解决方案考点" class="headerlink" title="1.高并发和大流量解决方案考点"></a>1.高并发和大流量解决方案考点</h1><h2 id="1-回顾"><a href="#1-回顾" class="headerlink" title="1.回顾"></a>1.回顾</h2><p>真题:PHP如何解决网站大流量与高并发的问题？<br>考官考点:高并发架构相关概念，高并发解决方案案例</p>
<h2 id="2-高并发架构相关概念"><a href="#2-高并发架构相关概念" class="headerlink" title="2.高并发架构相关概念"></a>2.高并发架构相关概念</h2><p>并发:在操作系统中，是指一个时间段中有几个程序都处于已启动运行到运行完毕之间，且这几个程序都是在同一个处理机上运行，但任一个时刻点上只有一个程序在处理机上运行。<br>我们所说的高并发：在互联网领域，并发、高并发通常是指并发访问；即在某个时间点，有多少个访问同时到来；通常一个系统大的日PV在千万以上，有可能是个高并发的系统。<br>QPS：每秒钟请求或者查询的数量，在互联网领域，指每秒响应请求书（指HTTP请求）<br>吞吐量：单位时间内处理的请求数量（通常由QPS与并发数决定）<br>响应时间：从请求发出到收到响应花费的时间。例如系统处理一个HTTP请求需要100ms，这个100ms就是系统的响应时间<br>PV：综合浏览器（Page View），即页面浏览量或者点击量，一个访客在24小时内访问的页面数量；同一个访客浏览网站的同一页面，只记作一次PV<br>UV：独立访客（Unique Visitor），即一定时间范围内相同访客多次访问网站，只计算为1个独立访客<br>带宽：计算带宽大小需要关心两个指标，峰值流量和页面平均大小<br>日网站带宽 = PV / 统计时间(换算到秒) * 平均页面大小(单位KB) * 8<br>(总PV数 * 80%) / (6小时秒数 * 20%) = 峰值每秒请求数(QPS)<br>二八定律：80%的访问量都集中在20%的访问时间<br>峰值一般是平均值的倍数，根据实际情况来定<br>QPS ≠ 并发连接数，QPS是每秒HTTP请求数量，并发连接数是系统同时处理的请求数量<br>压力测试：测试能承受的最大并发数，测试最大承受的QPS值<br>常用性能测试工具：ab、wrk、http_load、Web Bench、Siege、Apache JMeter<br>ab:apache benchmark，是apache官方推出的工具；创建多个并发访问线程，模拟多个访问者同时对某一URL地址进行访问。它的测试目标是基于URL的，因此它既可以测试apach的负载压力，也可以测试nginx、lighthttp、tomact、IIS等其他web服务器的压力；ab -c 100 -n 5000 待测试网站<br>测试注意事项：测试机器与被测试机器分开；不要对线上服务做压力测试；观察测试工具ab所在机器，以及被测试的前端机的CPU，内存，网络等丢不超过最高限度的75%<br>QPS达到极限：随着QPS的增长，每个阶段需要根据实际情况来进行优化，优化的方案也与硬件条件、网络带宽息息相关。<br>QPS达到50：可以称之为小型网站，一般的服务器就可以应付<br>QPS达到100：假设关系型数据库的每次请求在0.01秒完成；假设单页面只有一个SQL查询，那么100QPS意味着1秒钟完成100次请求，但是此时我们并不能保证数据库查询能完成100次；优化方案：数据库缓存层、数据库的负载均衡<br>QPS达到800：假设我们使用百兆带宽，意味着网站出口的实际带宽是8M左右；假设每个页面只有10K，在这个并发条件下，百兆带宽就已经用完；优化方案：CDN加速、负载均衡<br>QPS达到1000：假设使用Memcache缓存数据库查询数据，每个页面对Memcache的请求远大于直接对DB的请求；Memcache的悲观并发数在2w左右，但有可能在之前内网带宽已经用完，表现出不稳定；优化方案：静态HTML缓存<br>QPS达到2000：这个级别下，文件系统访问锁都成为了灾难；优化方案：做业务分类，分布式存储</p>
<h2 id="3-高并发解决方案案例"><a href="#3-高并发解决方案案例" class="headerlink" title="3.高并发解决方案案例"></a>3.高并发解决方案案例</h2><p>流量优化：防盗链处理<br>前端优化：减少HTTP请求(合并css js 图片)，添加异步请求(不重要的信息转为ajax)，启用浏览器的缓存和文件压缩，CDN加速，建立独立的图片服务器<br>服务端优化：页面静态化(如laravel框架自带缓存)，并发处理(多线程处理)，队列处理<br>数据库优化：数据库缓存memcache redis，分库分表、分区操作，读写分离，负载均衡<br>web服务器优化：负载均衡nginx反向代理、LVS<br><br><br><br></p>
<h1 id="2-web资源防盗链"><a href="#2-web资源防盗链" class="headerlink" title="2.web资源防盗链"></a>2.web资源防盗链</h1><h2 id="1-什么是防盗链"><a href="#1-什么是防盗链" class="headerlink" title="1.什么是防盗链"></a>1.什么是防盗链</h2><p>盗链：在自己的页面上展示一些并不在自己服务器上的内容；获得他人服务器上的资源地址，绕过别人的资源展示页面，直接在自己的页面上向最终用户提供此内容；常见的是小站盗用大站的图片、音乐、视频、软件等资源；通过盗链的方法可以减轻自己服务器的负担，因为真实的空间和流量均是来自别人的服务器。<br>防盗链：防止别人通过一些技术手段绕过本站的资源展示页面，盗用本站的资源，让绕开本站资源展示页面的资源链接失效；可以大大减轻服务器及带宽的压力。</p>
<h2 id="2-防盗链的工作原理"><a href="#2-防盗链的工作原理" class="headerlink" title="2.防盗链的工作原理"></a>2.防盗链的工作原理</h2><p>通过referer或者签名，网站可以检测目标网页访问的来源网页，如果是资源文件，则可以跟踪到显示它的网页地址。<br>一旦检测到来源不是本站，即进行阻止或者返回指定的页面。<br>通过计算签名的方式，判断请求是否合法，如果合法则显示，否则返回错误信息。</p>
<h2 id="3-通过Referer实现防盗链"><a href="#3-通过Referer实现防盗链" class="headerlink" title="3.通过Referer实现防盗链"></a>3.通过Referer实现防盗链</h2><p>Referer：nginx模块 ngx_http_referer_module 用于阻挡来源非法的域名请求；nginx指令valid_referers，全局变量$invalid_referer<br>valid_referers none | blocked | server_names | string …;<br>none:”Referer”来源头部为空的情况<br>blocked:”Referer”来源头部不为空，但是里面的值被代理或者防火墙删除了，这些值都不以http://或者https://开头<br>server_names:”Referer”来源头部包含当前的server_names<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location ~.*\.(gif|jpg|png|flv|swf|rar|zip)$</span><br><span class="line">&#123;</span><br><span class="line">	valid_referers none blocked 本站localhost；</span><br><span class="line">	if($invalid_referer)</span><br><span class="line">	&#123;</span><br><span class="line">		#return 403;</span><br><span class="line">		rewrite ^/ http://localhost/403.jpg;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Referer还可以对目录进行防盗链</p>
<h2 id="4-通过第三方模块加密签名实现防盗链"><a href="#4-通过第三方模块加密签名实现防盗链" class="headerlink" title="4.通过第三方模块加密签名实现防盗链"></a>4.通过第三方模块加密签名实现防盗链</h2><p>解决了伪造Referer<br>使用第三方模块HttpAccessKeyModule实现nginx防盗链<br>accesskey on|off 模块开关<br>accesskey_hashmethod md5|sha-1签名加密方式<br>accesskey_arg GET参数名称<br>accesskey_signature 加密规则<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location ~.*\.(gif|jpg|png|flv|swf|rar|zip)$</span><br><span class="line">&#123;</span><br><span class="line">	accesskey on;</span><br><span class="line">	accesskey_hashmethod md5;</span><br><span class="line">	accesskey_arg &quot;key&quot;;</span><br><span class="line">	accesskey_signature &quot;mypass$remote_addr&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="3-减少HTTP请求次数"><a href="#3-减少HTTP请求次数" class="headerlink" title="3.减少HTTP请求次数"></a>3.减少HTTP请求次数</h1><h2 id="1-为什么要减少HTTP请求"><a href="#1-为什么要减少HTTP请求" class="headerlink" title="1.为什么要减少HTTP请求"></a>1.为什么要减少HTTP请求</h2><p>性能黄金法则：只有10%~20%的最终用户响应时间花在接受请求的HTML文档上，剩下的80%~90%时间花在HTML文档所引用的所有组件（图片、script、css、flash等等）进行的HTTP请求上。<br>如何改善：改善响应时间的最简单途径就是减少组件的数量，并由此减少HTTP请求的数量。<br>HTTP连接产生的开销：域名解析–TCP连接–发送请求–等待–下载资源–解析时间<br>DNS缓存不靠谱：查找DNS缓存也需要时间，多个缓存就要查找多次，有可能缓存会被清除<br>HTTP1.1协议规定请求只能串行发送，也就是说一百个请求必须依次逐个发送，前面的一个请求完成才能开始下一个请求</p>
<h2 id="2-减少HTTP请求的方式"><a href="#2-减少HTTP请求的方式" class="headerlink" title="2.减少HTTP请求的方式"></a>2.减少HTTP请求的方式</h2><p>图片地图：图片地图允许你在一个图片上关联多个URL；目标URL的选择取决于用户单击了图片上的哪个位置；使用<map><area></map>标签。<br>CSS Sprites：CSS精灵，通过使用合并图片，指定css的background-image和background-position来显示元素。<br>性能影响：图片地图与CSS精灵的响应时间基本上相同，但比使用各自独立图片的方式要快50%以上。<br>合并脚本和样式表：使用外部的js和css文件引用的方式，因为这要比直接写在页面中性能要更好一点；独立的一个js比用多个js文件组成的页面载入要快38%；把多个脚本合并为一个脚本，把多个样式表合并为一个样式表。<br>图片使用Base64编码减少页面请求数：采用Base64的编码方式将图片直接嵌入到网页中，而不是外部载入；<code>&lt;img src=&quot;data:image/gif;base64,abc...&quot;/&gt;</code><br><br><br><br></p>
<h1 id="4-浏览器缓存和压缩优化技术"><a href="#4-浏览器缓存和压缩优化技术" class="headerlink" title="4.浏览器缓存和压缩优化技术"></a>4.浏览器缓存和压缩优化技术</h1><h2 id="1-HTTP缓存机制"><a href="#1-HTTP缓存机制" class="headerlink" title="1.HTTP缓存机制"></a>1.HTTP缓存机制</h2><p>缓存分类:HTTP缓存模型中,如果请求成功会有三种情况.<br>200 from cache:直接从本地缓存中获取响应,最快速,最省流量,因为根本没有向服务器发送请求.<br>304 not modified:协商缓存,浏览器在本地没有命中的情况下请求头中发送一定的校验数据到服务端,如果服务端数据没有改变,浏览器从本地缓存响应,返回304;快速,发送的数据很少,只返回一些基本的响应头信息,数据量很小,不发送实际响应体.<br>200 OK:以上两次缓存全都失败,服务器返回完整的响应.没有用到缓存,相对最慢.</p>
<h2 id="2-本地缓存"><a href="#2-本地缓存" class="headerlink" title="2.本地缓存"></a>2.本地缓存</h2><p>浏览器认为本地缓存可以使用,就不会去请求服务端.<br>pragma:HTTP1.0时代的遗留产物,该字段被设置为no-cache时,会告知浏览器禁用本地缓存,即每次都向服务器发送请求.<br>expires:HTTP1.0时代用来启用本地缓存的字段,expires值对应一个形如 Thu,31 Dec 2037 23:55:55 GMT的格林威治时间,告诉浏览器缓存实现的时刻,如果还没到该时刻,表示缓存有效,无需发送请求.<br>浏览器与服务器的时间无法保持一致,如果时间差距大,就会影响缓存结果.<br>cache-control:HTTP1.1针对Expires时间不一致的解决方案,运用cache-control告知浏览器缓存过期的时间间隔而不是时刻,即使具体时间不一致,也不影响缓存的管理.<br>cache-control:no-store 禁止浏览器缓存响应;no-cache 不允许直接使用本地缓存,先发起请求和服务器协商;max-age=dalta-seconds 告知浏览器该响应本地缓存有效的最长时限,以秒为单位.<br>优先级: pragma &gt; cache-control &gt; expires</p>
<h2 id="3-协商缓存"><a href="#3-协商缓存" class="headerlink" title="3.协商缓存"></a>3.协商缓存</h2><p>当浏览器没有命中本地缓存,如本地缓存过期或者响应中声明不允许直接使用本地缓存,那么浏览器肯定会发起服务端请求.<br>服务端会验证数据是否修改,如果没有修改,通知浏览器使用本地缓存.<br>last-modified:通知浏览器资源的最后欧修改时间.<br>if-modified-since:得到资源的最后修改时间后,会将这个信息通过if-moodifed-since提交到服务器做检查,如果没有修改,返回304状态码.<br>etag:HTTP1.1推出,文件的指纹标识符,如果文件内容修改,指纹会改变.<br>if-none-match:本地缓存失效,会携带此值去请求服务端,服务端判断该资源是否改变,如果没有改变,直接使用本地缓存,返回304.</p>
<h2 id="4-缓存策略的选择"><a href="#4-缓存策略的选择" class="headerlink" title="4.缓存策略的选择"></a>4.缓存策略的选择</h2><p>适合缓存的内容:不变的图片,如logo,图标等;js css静态文件;可下载的内容,媒体文件.<br>建议使用协商缓存:HTML文件,经常替换的图片,经常修改的js css文件.<br>不建议缓存的内容:用户隐私等敏感数据,经常改变的api数据接口.</p>
<h2 id="5-nginx配置缓存策略"><a href="#5-nginx配置缓存策略" class="headerlink" title="5.nginx配置缓存策略"></a>5.nginx配置缓存策略</h2><p>add_header指令:添加状态码为2XX和3XX的响应信息<br>add_header name value [always]<br>可以设置Pragma/Cache-Control/Expires,可以继承<br>expires指令:通知浏览器过期时长;expires time;time为负表示cache-control:no-cache,为正或者0表示cache-control:max-age=指定的时间,为max表示Cache-Control设置到10年.<br>协商缓存相关配置:etag指令: etag on|off</p>
<h2 id="6-前端代码和资源的压缩"><a href="#6-前端代码和资源的压缩" class="headerlink" title="6.前端代码和资源的压缩"></a>6.前端代码和资源的压缩</h2><p>优势:让资源文件更小,加快文件在网络中的传输,让网页更快的展现,降低带宽和流量开销<br>压缩方式:js css 图片 HTML代码的压缩,Gzip压缩<br>JavaScript代码压缩:JavaScript压缩的原理一般是去掉多余的空格和回车,替换长变量名,简化一些代码写法等;JavaScript代码压缩工具很多;常用压缩工具:UglifyJS / YUI Compressor / Closure / Compiler.<br>css代码压缩:原理同js,同样是去除空白符/注释并且优化一些css语义规则等.<br>HTML代码压缩:不建议使用代码压缩,有时会破坏代码结构,可以使用Gzip压缩,当然也可以使用htmlcompressor工具,不过转换后一定要检查代码结构.<br>图片压缩:一般情况下图片在web系统的比重都比较大.压缩工具:tinypng/JpegMini/ImageOptim<br>nginx配置Gzip:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gzip on|off; #是否开启gzip</span><br><span class="line">gzip_buffers 32 4K| 16 8K #缓存(在内存中缓存几块?每块多大)</span><br><span class="line">gzip_comp_level[1-9] #推荐6 压缩级别越高压的越小,越浪费CPU计算资源</span><br><span class="line">gzip_disable #正则匹配UA 不进行gzip的URI</span><br><span class="line">gzip_min_length 200 #开始压缩的最小长度</span><br><span class="line">gzip_http_version 1.0|1.1 #开始压缩的HTTP协议版本</span><br><span class="line">gzip_proxied #设置请求代理服务,该如何缓存内容</span><br><span class="line">gzip_types text/plain application/xml #对哪些类型的文件用压缩</span><br><span class="line">gzip_vary on|off #是否传输gzip压缩标志</span><br></pre></td></tr></table></figure></p>
<p>其他工具:前端自动化构建工具Grunt</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/PHP/" rel="tag"># PHP</a>
          
            <a href="/tags/知识总结/" rel="tag"># 知识总结</a>
          
            <a href="/tags/网站优化/" rel="tag"># 网站优化</a>
          
            <a href="/tags/负载均衡/" rel="tag"># 负载均衡</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/03/PHP面试总结之算法、逻辑思维考点/" rel="next" title="PHP面试总结之算法、逻辑思维考点">
                <i class="fa fa-chevron-left"></i> PHP面试总结之算法、逻辑思维考点
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.JPG"
                alt="Fullegg" />
            
              <p class="site-author-name" itemprop="name">Fullegg</p>
              <p class="site-description motion-element" itemprop="description">装B话：look to the master, follow the master, walk with the master, see through the master, become the master.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/fullegg233" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:fullegg233@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-高并发和大流量解决方案考点"><span class="nav-number">1.</span> <span class="nav-text">1.高并发和大流量解决方案考点</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-回顾"><span class="nav-number">1.1.</span> <span class="nav-text">1.回顾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-高并发架构相关概念"><span class="nav-number">1.2.</span> <span class="nav-text">2.高并发架构相关概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-高并发解决方案案例"><span class="nav-number">1.3.</span> <span class="nav-text">3.高并发解决方案案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-web资源防盗链"><span class="nav-number">2.</span> <span class="nav-text">2.web资源防盗链</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-什么是防盗链"><span class="nav-number">2.1.</span> <span class="nav-text">1.什么是防盗链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-防盗链的工作原理"><span class="nav-number">2.2.</span> <span class="nav-text">2.防盗链的工作原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-通过Referer实现防盗链"><span class="nav-number">2.3.</span> <span class="nav-text">3.通过Referer实现防盗链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-通过第三方模块加密签名实现防盗链"><span class="nav-number">2.4.</span> <span class="nav-text">4.通过第三方模块加密签名实现防盗链</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-减少HTTP请求次数"><span class="nav-number">3.</span> <span class="nav-text">3.减少HTTP请求次数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-为什么要减少HTTP请求"><span class="nav-number">3.1.</span> <span class="nav-text">1.为什么要减少HTTP请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-减少HTTP请求的方式"><span class="nav-number">3.2.</span> <span class="nav-text">2.减少HTTP请求的方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-浏览器缓存和压缩优化技术"><span class="nav-number">4.</span> <span class="nav-text">4.浏览器缓存和压缩优化技术</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-HTTP缓存机制"><span class="nav-number">4.1.</span> <span class="nav-text">1.HTTP缓存机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-本地缓存"><span class="nav-number">4.2.</span> <span class="nav-text">2.本地缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-协商缓存"><span class="nav-number">4.3.</span> <span class="nav-text">3.协商缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-缓存策略的选择"><span class="nav-number">4.4.</span> <span class="nav-text">4.缓存策略的选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-nginx配置缓存策略"><span class="nav-number">4.5.</span> <span class="nav-text">5.nginx配置缓存策略</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-前端代码和资源的压缩"><span class="nav-number">4.6.</span> <span class="nav-text">6.前端代码和资源的压缩</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fullegg</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
<script type="text/javascript" src="/js/src/love.js"></script>